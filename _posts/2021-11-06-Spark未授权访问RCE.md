---
title: Spark未授权访问RCE    --花无名   
layout: mypost
categories: [漏洞复现]
---

## 1.Apache Spark 

Apache Spark 是专为大规模[数据处理](https://baike.baidu.com/item/数据处理/944504)而设计的快速通用的计算引擎。是一种与 Hadoop 相似的开源集群计算环境，但是两者之间还存在一些不同之处，这些有用的不同之处使 Spark 在某些工作负载方面表现得更加优越，换句话说，Spark 启用了内存分布数据集，除了能够提供交互式查询外，它还可以优化迭代工作负载。

## 2.漏洞介绍

系统未做身份验证，导致任意用户访问系统地址即可进入系统管理界面，并通过构造数据包，调用系统API接口，提交REST格式的API恶意代码，从而导致系统可被执行任意代码并getshell

## 3.漏洞复现

A：直接访问目标的8080端口即可进入系统管理界面，查看当前版本号为2.3.1（注：这里使用的靶场环境为vulfocus，故端口映射与系统原本默认端口不一致）

![image-20211106110800090](image-20211106110800090.png)

B：构造数据包：使用目标6066端口/v1/submissions/create构造数据包，提交REST格式的API恶意代码，并获取submissionId，其中appArgs参数值为需要执行的命令

![image-20211106111209048](image-20211106111209048.png)

C：成功获取submissionid后，访问 http://your-ip:8081/logPage/?driverId={submissionId}&logType=stdout 即可查看执行结果

![image-20211106111440687](image-20211106111440687.png)